    LDA #$00
    STA CONTROL_ACCUMULATED?[2]
    STA CONTROL_ACCUMULATED?+1
    STA **:$0052
    STA **:$0059
    STA **:$0049
    STA **:$004A
    STA **:$004B
    STA **:$004C
    STA **:$004D
    TAX
    STA **:$0600,X
    INX
    BNE 17:0015
    LDX #$1F
    STA CHARACTER_NAMES_ARR[8],X
    DEX
    BPL 17:001D
    LDA #$00
    STA **:$0053
    LDX #$00
    TXA
    PHA
    LDA CURRENT_SAVE_MANIPULATION_PAGE+8,X
    BEQ 17:003A
    JSR $A1DD
    CLC
    LDA **:$0053
    ADC #$20
    STA **:$0053
    PLA
    TAX
    INX
    CPX #$04
    BNE 17:0029
    JSR LIB_UNK_1479
    LDA #$80
    STA **:$0053
    LDY #$00
    LDA [FPTR_5C_UNK[2]],Y
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    INY
    LDA [FPTR_5C_UNK[2]],Y
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    INY
    TYA
    PHA
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    CMP #$FF
    BEQ 17:005F
    JSR $A22D
    CLC
    LDA **:$0053
    ADC #$20
    STA **:$0053
    PLA
    TAY
    CPY #$08
    BNE 17:004A
    LDA [FPTR_5C_UNK[2]],Y
    AND #$E0
    LDX #$05
    LSR A
    DEX
    BNE 17:0072
    STA 56_THING_NAME_SIZE
    LDA [FPTR_5C_UNK[2]],Y
    AND #$1F
    STA **:$005A
    INY
    LDA [FPTR_5C_UNK[2]],Y
    AND #$0F
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA #$00
    LDX #$05
    ASL ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    ROL A
    DEX
    BNE 17:0089
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    CLC
    LDA #$81
    ADC ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA #$8E
    ADC ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    JSR 1F:1247
    JSR ENGINE_SET_PALETTE_AND_QUEUE_UPLOAD
    JSR LIB_MAPPER_BANKED_UNK
    LDX #$23
    LDY #$C0
    JSR $A3D2
    LDX #$2B
    LDY #$C0
    JSR $A3D2
    JSR 1F:15E5
    LDA #$00
    STA **:$005B
    LDA #$80
    STA **:$0053
    LDX **:$0053
    LDA **:$0600,X
    BEQ 17:00CA
    JSR $A28A
    INC **:$005B
    CLC
    LDA **:$0053
    ADC #$20
    STA **:$0053
    BCC 17:00C0
    LDY #$00
    LDX #$00
    LDA CHARACTER_NAMES_ARR[8],Y
    INY
    ORA CHARACTER_NAMES_ARR[8],Y
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    INY
    LDA CHARACTER_NAMES_ARR[8],Y
    INY
    ORA CHARACTER_NAMES_ARR[8],Y
    ASL A
    ASL A
    ORA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    ASL A
    ASL A
    ASL A
    ASL A
    ORA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA CHARACTER_NAMES_ARR[8],X
    INY
    INX
    CPX #$08
    BNE 17:00D9
    JSR ENGINE_SETTLE_ALL_UPDATES?
    LDA #$05
    STA NMI_PPU_CMD_PACKETS_BUF[64]
    LDA #$10
    STA NMI_PPU_CMD_PACKETS_BUF+1
    LDY #$00
    LDX #$04
    LDA CHARACTER_NAMES_ARR[8],Y
    STA NMI_PPU_CMD_PACKETS_BUF[64],X
    STA NMI_PPU_CMD_PACKETS_BUF+8,X
    INY
    INX
    CPY #$08
    BNE 17:0110
    LDA #$00
    STA NMI_PPU_CMD_PACKETS_BUF+8,X
    LDA #$80
    STA NMI_FLAG_E5_TODO
    LDA #$23
    STA NMI_PPU_CMD_PACKETS_BUF+2
    LDA #$D8
    STA NMI_PPU_CMD_PACKETS_BUF+3
    LDA #$00
    STA NMI_PPU_CMD_PACKETS_INDEX
    LDA #$00
    STA **:$0047
    STA R_**:$0048
    LDX #$80
    TXA
    PHA
    LDY #$04
    LDA **:$0604,X
    AND #$03
    STA **:$0604,X
    INX
    INX
    DEY
    BNE 17:0142
    PLA
    CLC
    ADC #$20
    TAX
    BNE 17:013E
    LDX #$00
    LDA 56_THING_NAME_SIZE
    CMP #$01
    BNE 17:0173
    LDX #$04
    LDA #$FF
    STA **:$0683
    STA **:$0684
    LDA #$00
    STA **:$0620
    STA **:$0640
    STA **:$0660
    STX **:$005B
    LDA UNK_NONZERO_SKIP
    BEQ 17:018C
    LDY #$00
    STY 56_THING_NAME_SIZE
    LDA **:$061E,Y
    ORA #$04
    STA **:$061E,Y
    TYA
    CLC
    ADC #$20
    TAY
    BPL 17:017D
    LDA 56_THING_NAME_SIZE
    CMP #$05
    BNE 17:019C
    LDA #$96
    STA 57_INDEX_UNK
    LDA **:$060C
    STA **:$068C
    LDX #$14
    JSR ENGINE_WAIT_X_TIMES_UNK
    JSR 1F:174C
    LDA #$00
    JSR 1F:14CE
    JSR $AC6A
    BCS 17:01D3
    LDX #$14
    JSR ENGINE_WAIT_X_TIMES_UNK
    LDA #$07
    JSR 1F:14CE
    LDA #$00
    STA **:$0052
    JSR 1F:0CFF
    JSR 1F:1765
    JSR $A50A
    JSR 1F:1760
    LDA #$03
    JSR 1F:14CE
    JSR 1F:0CFC
    JMP $A1A4
    JSR 1F:1759
    LDA #$00
    STA CONTROL_ACCUMULATED?[2]
    STA CONTROL_ACCUMULATED?+1
    RTS
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    TAX
    LDA #$00
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA #$74
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    CLC
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    ADC #$40
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    ADC #$00
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    DEX
    BNE 17:01E8
    LDY #$01
    LDX **:$0053
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    STA **:$0601,X
    INY
    INX
    CPY #$10
    BNE 17:01FC
    LDY #$14
    LDX **:$0053
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    STA **:$0603,X
    INX
    INY
    CPY #$18
    BNE 17:020B
    LDX **:$0053
    LDA #$FF
    STA **:$0600,X
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    STA **:$0611,X
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA **:$0618,X
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    STA **:$0619,X
    RTS
    LDX **:$0053
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    ASL A
    ASL A
    STA **:$061A,X
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    LDA #$00
    LDX #$05
    ASL ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    ROL A
    DEX
    BNE 17:023E
    STA ENGINE_TO_DECIMAL_INDEX_POSITION
    CLC
    LDA #$00
    ADC ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    LDA #$80
    ADC ENGINE_TO_DECIMAL_INDEX_POSITION
    STA ENGINE_TO_DECIMAL_INDEX_POSITION
    LDY #$01
    LDX **:$0053
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE+2],Y
    STA **:$0601,X
    INY
    INX
    CPY #$18
    BNE 17:0257
    LDX **:$0053
    LDY R_**:$0048
    INY
    TYA
    STA **:$0600,X
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    STA **:$0618,X
    LDA ENGINE_TO_DECIMAL_INDEX_POSITION
    STA **:$0619,X
    LDY #$5E
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    BPL 17:0285
    LDA **:$061E,X
    ORA #$01
    STA **:$061E,X
    LDY #$00
    TYA
    STA **:$061D,X
    RTS
    LDA **:$061E,X
    AND #$01
    BEQ 17:0296
    LDA #$00
    STA **:$0600,X
    LDA **:$061A,X
    ORA **:$005B
    STA **:$061A,X
    LDA **:$0604,X
    AND #$F0
    LSR A
    LSR A
    LSR A
    TAY
    LDA $960A,Y
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA $960B,Y
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDA **:$0608,X
    AND #$E0
    LSR A
    LSR A
    LSR A
    LSR A
    LSR A
    STA ALT_STUFF_INDEX?
    LDY #$00
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    INY
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    STA ENGINE_TO_DECIMAL_INDEX_POSITION
    INY
    SEC
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    SBC ALT_STUFF_INDEX?
    TAY
    INY
    LDA #$E0
    CLC
    ADC #$20
    DEY
    BNE 17:02D2
    STA SAVE_GAME_MOD_PAGE_PTR[2]
    LDA **:$005A
    ASL A
    ASL A
    ADC **:$005B
    TAY
    LDA $8F40,Y
    STA SAVE_GAME_MOD_PAGE_PTR+1
    LDA **:$0604,X
    AND #$0C
    LSR A
    LSR A
    LDY SAVE_GAME_MOD_PAGE_PTR+1
    LDX #$00
    STA CHARACTER_NAMES_ARR[8],Y
    INY
    INX
    CPX ENGINE_TO_DECIMAL_INDEX_POSITION
    BNE 17:02F1
    CLC
    LDA SAVE_GAME_MOD_PAGE_PTR+1
    ADC SAVE_GAME_MOD_PAGE_PTR[2]
    ADC #$80
    STA SAVE_GAME_MOD_PAGE_PTR[2]
    LDA #$00
    ADC #$21
    STA SAVE_GAME_MOD_PAGE_PTR+1
    LDA SAVE_GAME_MOD_PAGE_PTR[2]
    AND #$E0
    STA ARR_BITS_TO_UNK[8]
    LDA SAVE_GAME_MOD_PAGE_PTR+1
    AND #$03
    LSR A
    ROR ARR_BITS_TO_UNK[8]
    LSR A
    ROR ARR_BITS_TO_UNK[8]
    SEC
    LDA ARR_BITS_TO_UNK[8]
    SBC #$19
    STA ARR_BITS_TO_UNK[8]
    LDA SAVE_GAME_MOD_PAGE_PTR[2]
    ASL A
    ASL A
    ASL A
    SEC
    SBC #$10
    STA ARR_BITS_TO_UNK+1
    LDX **:$005B
    INX
    LDA #$C0
    CLC
    ADC #$40
    DEX
    BNE 17:032F
    STA ALT_STUFF_INDEX?
    LDY #$02
    JSR ENGINE_SETTLE_ALL_UPDATES?
    LDX #$00
    LDA #$05
    STA NMI_PPU_CMD_PACKETS_BUF[64],X
    INX
    LDA ENGINE_TO_DECIMAL_INDEX_POSITION
    STA NMI_PPU_CMD_PACKETS_BUF[64],X
    STA ALT_COUNT_UNK
    INX
    LDA SAVE_GAME_MOD_PAGE_PTR+1
    STA NMI_PPU_CMD_PACKETS_BUF[64],X
    INX
    LDA SAVE_GAME_MOD_PAGE_PTR[2]
    STA NMI_PPU_CMD_PACKETS_BUF[64],X
    INY
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    CLC
    ADC ALT_STUFF_INDEX?
    INX
    STA NMI_PPU_CMD_PACKETS_BUF[64],X
    DEC ALT_COUNT_UNK
    BNE 17:0357
    LDA #$00
    INX
    STA NMI_PPU_CMD_PACKETS_BUF[64],X
    CLC
    LDA SAVE_GAME_MOD_PAGE_PTR[2]
    ADC #$20
    STA SAVE_GAME_MOD_PAGE_PTR[2]
    LDA SAVE_GAME_MOD_PAGE_PTR+1
    ADC #$00
    STA SAVE_GAME_MOD_PAGE_PTR+1
    LDA #$00
    STA NMI_PPU_CMD_PACKETS_INDEX
    LDA #$80
    STA NMI_FLAG_E5_TODO
    DEC ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    BNE 17:0339
    LDX **:$0053
    LDA **:$0606,X
    AND #$FC
    BEQ 17:03D1
    LSR A
    LSR A
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    ASL A
    ADC ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    CLC
    ADC #$C8
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA #$00
    ADC #$97
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDY #$00
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    STA **:$061C,X
    LDA **:$005B
    ASL A
    ASL A
    ASL A
    TAX
    LDA #$00
    STA **:$0300,X
    STA **:$0301,X
    STA **:$0304,X
    STA **:$0305,X
    LDA ARR_BITS_TO_UNK+1
    STA **:$0302,X
    LDA ARR_BITS_TO_UNK[8]
    STA **:$0303,X
    LDY #$01
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    STA **:$0306,X
    INY
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    STA **:$0307,X
    RTS
    JSR ENGINE_SETTLE_ALL_UPDATES?
    STX NMI_PPU_CMD_PACKETS_BUF+2
    STY NMI_PPU_CMD_PACKETS_BUF+3
    LDA #$08
    STA NMI_PPU_CMD_PACKETS_BUF[64]
    LDA #$40
    STA NMI_PPU_CMD_PACKETS_BUF+1
    LDA #$FF
    STA NMI_PPU_CMD_PACKETS_BUF+4
    LDA #$00
    STA NMI_PPU_CMD_PACKETS_BUF+5
    LDA #$80
    STA NMI_FLAG_E5_TODO
    LDA #$00
    STA NMI_PPU_CMD_PACKETS_INDEX
    RTS
    CMP #$00
    BEQ 17:0478
    PHA
    JSR $A4BB
    JSR 1F:1247
    PLA
    CMP #$FF
    BNE 17:042D
    SEC
    LDY **:$0054
    LDA **:$0618,Y
    SBC #$00
    STA FPTR_PACKET_CREATION[2]
    LDA **:$0619,Y
    SBC #$80
    ASL FPTR_PACKET_CREATION[2]
    ROL A
    ASL FPTR_PACKET_CREATION[2]
    ROL A
    ASL FPTR_PACKET_CREATION[2]
    ROL A
    CLC
    ADC #$14
    STA FPTR_PACKET_CREATION[2]
    LDA #$00
    ADC #$05
    STA RTN_ARG_UNK
    BCC 17:044A
    LDY #$00
    STY ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    ASL A
    ROL ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    CLC
    ADC #$81
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    ADC #$90
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDY #$00
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    STA FPTR_PACKET_CREATION[2]
    INY
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    STA RTN_ARG_UNK
    JSR L_1E:0AA2
    LDA FPTR_PACKET_CREATION[2]
    STA **:$0050
    LDA FPTR_PACKET_CREATION+1
    STA **:$0051
    LDA **:$0052
    CMP #$03
    BNE 17:0462
    LDX #$03
    JSR L_1E:07C1
    DEC **:$0052
    JSR $A479
    CMP #$02
    BEQ 17:046F
    INC **:$0052
    CMP #$00
    BNE 17:044A
    JSR LIB_MAPPER_BANKED_UNK
    LDX CURRENT_SAVE_MANIPULATION_PAGE+24
    JSR ENGINE_WAIT_X_TIMES_UNK
    RTS
    LDA **:$0052
    ASL A
    ADC #$03
    STA PACKET_YPOS_COORD?
    LDY #$00
    LDA [**:$0050],Y
    CMP #$03
    BNE 17:049D
    LDA #$0F
    STA PACKET_HPOS_COORD?
    JSR 1F:15C2
    INC **:$0050
    BNE 17:0495
    INC **:$0051
    LDY #$00
    LDA [**:$0050],Y
    CMP #$02
    BEQ 17:04BA
    LDA #$16
    STA R_**:$0070
    LDA #$05
    STA PACKET_HPOS_COORD?
    JSR ENGINE_SETTLE_ALL_UPDATES?
    LDA **:$0050
    STA FPTR_PACKET_CREATION[2]
    LDA **:$0051
    STA FPTR_PACKET_CREATION+1
    JSR RTN_IDFK
    LDA #$01
    JSR L_1E:07AF
    LDA ENGINE_SCRIPT_SWITCH_VAL
    RTS
    LDA #$21
    STA CHARACTER_NAMES_ARR[8]
    STA **:$0588
    LDA #$80
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    LDA #$05
    STA ENGINE_TO_DECIMAL_INDEX_POSITION
    LDX **:$0053
    JSR $A4DA
    LDA #$88
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    LDA #$05
    STA ENGINE_TO_DECIMAL_INDEX_POSITION
    LDX **:$0054
    LDA **:$0618,X
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA **:$0619,X
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDY #$18
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    PHA
    INY
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    LDY #$02
    STA [ENGINE_PALETTE_FPTR/BITS/GEN_USE+2],Y
    PLA
    DEY
    STA [ENGINE_PALETTE_FPTR/BITS/GEN_USE+2],Y
    INY
    INY
    LDA **:$061A,X
    AND #$1C
    BEQ 17:0505
    LSR A
    LSR A
    CLC
    ADC #$40
    STA [ENGINE_PALETTE_FPTR/BITS/GEN_USE+2],Y
    INY
    LDA #$00
    STA [ENGINE_PALETTE_FPTR/BITS/GEN_USE+2],Y
    RTS
    LDA #$00
    STA **:$0053
    LDY **:$0053
    LDA #$00
    STA **:$061D,Y
    LDA **:$061E,Y
    AND #$F7
    STA **:$061E,Y
    LDA **:$0600,Y
    BEQ 17:0535
    LDA **:$0601,Y
    AND #$F4
    BNE 17:0535
    LDA **:$061E,Y
    AND #$20
    BNE 17:0535
    JSR $A53F
    BCS 17:050E
    CLC
    LDA **:$0053
    ADC #$20
    STA **:$0053
    BNE 17:050E
    RTS
    LDA **:$0059
    BNE 17:0559
    LDY **:$0053
    BMI 17:0559
    LDA **:$0611,Y
    AND #$06
    EOR #$06
    BEQ 17:0559
    JSR $A7DA
    BCS 17:0572
    LDA **:$0059
    BEQ 17:055C
    JSR $A573
    LDY **:$0053
    LDA **:$061D,Y
    CMP #$53
    BEQ 17:0569
    CMP #$59
    BNE 17:0571
    LDA **:$061E,Y
    ORA #$08
    STA **:$061E,Y
    CLC
    RTS
    LDA **:$0053
    BMI 17:057A
    JMP $A57D
    JMP $A723
    LDY #$00
    STY **:$0054
    LDA **:$0600,Y
    BEQ 17:0594
    LDA **:$0611,Y
    AND #$06
    EOR #$06
    BEQ 17:0594
    LDA **:$0601,Y
    BMI 17:059D
    TYA
    CLC
    ADC #$20
    TAY
    BPL 17:057F
    BMI 17:05A0
    JMP $A6B0
    LDY #$00
    STY **:$0054
    LDA **:$0600,Y
    BEQ 17:05BC
    LDA **:$0601,Y
    BMI 17:05BC
    LDA **:$0611,Y
    AND #$06
    EOR #$06
    BEQ 17:05BC
    JSR 1F:1673
    BCC 17:05C5
    TYA
    CLC
    ADC #$20
    TAY
    BPL 17:05A2
    BMI 17:05E9
    LDX #$00
    LDY #$00
    LDA **:$0600,Y
    BEQ 17:05DB
    LDA **:$0601,Y
    BMI 17:05DB
    JSR 1F:1673
    BCS 17:05DB
    INX
    STY **:$0054
    TYA
    CLC
    ADC #$20
    TAY
    BPL 17:05C9
    CPX #$01
    BCC 17:0611
    JMP $A623
    LDY #$00
    STY **:$0054
    LDA **:$0600,Y
    BEQ 17:0604
    LDA **:$0611,Y
    AND #$06
    EOR #$06
    BEQ 17:0604
    LDA **:$0601,Y
    BMI 17:0604
    AND #$70
    BNE 17:060E
    TYA
    CLC
    ADC #$20
    TAY
    BPL 17:05EB
    JMP $A690
    JMP $A659
    LDA #$0C
    JSR $A6C2
    BCC 17:0622
    LDA #$0B
    JSR $A6C2
    BCC 17:0622
    JMP $A623
    RTS
    LDA #$0A
    JSR $A6C2
    BCC 17:0651
    LDA #$09
    JSR $A6C2
    BCC 17:0651
    LDA #$08
    JSR $A6C2
    BCC 17:0651
    LDY **:$0053
    JSR $BFAA
    BCS 17:05E9
    CPX #$7C
    BEQ 17:05E9
    CPX #$84
    BEQ 17:05E9
    TYA
    LDY **:$0053
    STA **:$0610,Y
    TXA
    STA **:$061D,Y
    LDA **:$0054
    LDY **:$0053
    STA **:$061C,Y
    RTS
    LDY **:$0054
    LDA **:$0601,Y
    TAX
    AND #$20
    BNE 17:0670
    TXA
    AND #$10
    BNE 17:0677
    TXA
    AND #$40
    BNE 17:067E
    JMP $A685
    LDA #$11
    JSR $A6C2
    BCC 17:0688
    LDA #$13
    JSR $A6C2
    BCC 17:0688
    LDA #$12
    JSR $A6C2
    BCC 17:0688
    JMP $A690
    LDA **:$0054
    LDY **:$0053
    STA **:$061C,Y
    RTS
    LDY **:$0053
    LDA #$01
    STA **:$061D,Y
    JSR ADDS_IDFK
    AND #$E0
    ORA #$80
    TAY
    LDA **:$0600,Y
    BEQ 17:0697
    LDA **:$0601,Y
    BMI 17:0697
    TYA
    LDY **:$0053
    STA **:$061C,Y
    RTS
    LDA #$14
    JSR $A6C2
    BCC 17:06BA
    JMP $A5A0
    LDY **:$0053
    LDA **:$0054
    STA **:$061C,Y
    RTS
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    JSR $A86B
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LSR A
    LSR A
    LSR A
    TAY
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    AND #$07
    TAX
    INX
    SEC
    LDA #$00
    ROR A
    DEX
    BNE 17:06D6
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDA [FPTR_5C_UNK[2]],Y
    AND ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    BEQ 17:0721
    LDA #$00
    ASL ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    ROL A
    ASL ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    ROL A
    ASL ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    ROL A
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    CLC
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    ADC #$00
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    ADC #$9E
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    JSR 1F:1247
    LDY #$05
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    LDY **:$0053
    STA **:$061D,Y
    LDY #$07
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    STA **:$004E
    LDA #$00
    STA **:$004F
    JSR LIB_MAPPER_BANKED_UNK
    JSR $B1D1
    BCC 17:0721
    JSR $B1C5
    BCC 17:0721
    CLC
    RTS
    SEC
    RTS
    JSR ADDS_IDFK
    AND #$07
    CLC
    ADC **:$0053
    TAY
    LDA **:$0610,Y
    LDY **:$0053
    STA **:$061D,Y
    JSR $AC23
    JSR DATA_PAST_UNK
    .db A3
    .db A7
    .db 40
    .db A7
    .db 4A
    .db A7
    JSR $A7AB
    LDA **:$0054
    BPL 17:0740
    JMP $A7A3
    LDA **:$0053
    BPL 17:0796
    LDA 56_THING_NAME_SIZE
    CMP #$03
    BNE 17:0760
    LDX #$03
    LDA #$06
    JSR $A7BE
    BCS 17:07A0
    DEX
    BPL 17:0756
    LDA 56_THING_NAME_SIZE
    CMP #$04
    BNE 17:078A
    LDX #$03
    LDA #$01
    JSR $A7BE
    BCS 17:07A0
    DEX
    BPL 17:0768
    LDX #$03
    LDA #$02
    JSR $A7BE
    BCS 17:07A0
    DEX
    BPL 17:0774
    LDX #$03
    LDA #$04
    JSR $A7BE
    BCS 17:07A0
    DEX
    BPL 17:0780
    LDX #$03
    LDA #$07
    JSR $A7BE
    BCS 17:07A0
    DEX
    BPL 17:078C
    JSR $A7AB
    LDA **:$0054
    BMI 17:0796
    JMP $A7A3
    JMP $A7A3
    LDA **:$0054
    LDY **:$0053
    STA **:$061C,Y
    RTS
    JSR ADDS_IDFK
    AND #$E0
    TAY
    LDA **:$0600,Y
    BEQ 17:07AB
    LDA **:$0601,Y
    BMI 17:07AB
    STY **:$0054
    RTS
    CMP CURRENT_SAVE_MANIPULATION_PAGE+8,X
    BNE 17:07D8
    TXA
    ASL A
    ASL A
    ASL A
    ASL A
    ASL A
    TAY
    LDA **:$0600,Y
    BEQ 17:07D8
    LDA **:$0601,Y
    BMI 17:07D8
    STY **:$0054
    SEC
    RTS
    CLC
    RTS
    JSR $AC06
    LDA #$02
    LDX CURRENT_SAVE_MANIPULATION_PAGE+540
    BPL 17:07E6
    LDA #$13
    JSR 1F:14CE
    JSR $A90D
    JSR DATA_PAST_UNK
    .db 02
    .db A8
    .db 14
    .db A8
    .db 47
    .db A8
    .db 7D
    .db A8
    .db 88
    .db A8
    .db BA
    .db A8
    .db BF
    .db A8
    .db E2
    .db A8
    .db E7
    .db A8
    .db 60
    LDA #$01
    LDY **:$0053
    STA **:$061D,Y
    JSR $A962
    BCC 17:0811
    JMP $A7DD
    JMP $A801
    JSR ENGINE_SETTLE_ALL_UPDATES?
    LDA #$01
    STA **:$0059
    LDA #$14
    STA **:$03E6
    LDA #$97
    STA **:$03E7
    LDA #$04
    STA **:$03E0
    LDA #$00
    STA **:$03E1
    STA **:$03E4
    STA **:$03E5
    LDA #$D0
    STA **:$03E2
    LDA #$47
    STA **:$03E3
    LDA #$01
    STA NMI_FLAG_E5_TODO
    CLC
    JMP $A801
    JSR $A86B
    LDA #$00
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDY #$07
    LDA [FPTR_5C_UNK[2]],Y
    ORA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    DEY
    BNE 17:0850
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    BEQ 17:0868
    JSR $AB10
    BCS 17:0865
    JMP $A801
    JMP $A7DA
    JMP $A7DD
    LDY **:$0053
    CLC
    LDA **:$0618,Y
    ADC #$30
    STA FPTR_5C_UNK[2]
    LDA **:$0619,Y
    ADC #$00
    STA FPTR_5C_UNK+1
    RTS
    LDA #$59
    LDY **:$0053
    STA **:$061D,Y
    CLC
    JMP $A801
    LDY **:$0053
    CLC
    LDA **:$0618,Y
    ADC #$20
    STA FPTR_5C_UNK[2]
    LDA **:$0619,Y
    ADC #$00
    STA FPTR_5C_UNK+1
    LDA #$00
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDY #$07
    LDA [FPTR_5C_UNK[2]],Y
    ORA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    DEY
    BPL 17:089F
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    BEQ 17:08B7
    JSR $AA08
    BCS 17:08B4
    JMP $A801
    JMP $A7DA
    JMP $A7DD
    LDA #$48
    JMP $A87F
    LDA #$80
    STA **:$0054
    JSR $A991
    BCS 17:08DF
    LDX FPTR_UNK_84_MENU_SELECTION?[2]
    LDA **:$0591,X
    TAX
    DEX
    TXA
    STA **:$0054
    LDY **:$0053
    STA **:$061C,Y
    LDA #$6F
    STA **:$061D,Y
    JMP $A801
    JMP $A7DD
    LDA #$1C
    JMP $A87F
    SEC
    LDA **:$0053
    BEQ 17:0909
    SBC #$20
    STA **:$0053
    TAY
    LDA **:$0600,Y
    BEQ 17:08E7
    LDA **:$0601,Y
    BMI 17:08E7
    LDA **:$0601,Y
    AND #$F4
    BNE 17:08E7
    LDA **:$061E,Y
    AND #$20
    BNE 17:08E7
    SEC
    JMP $A801
    LDX #$73
    LDY #$9F
    LDA 56_THING_NAME_SIZE
    CMP #$01
    BNE 17:091E
    LDX #$83
    LDY #$9F
    JMP $A927
    LDA CURRENT_SAVE_MANIPULATION_PAGE+540
    BPL 17:0927
    LDX #$7B
    LDY #$9F
    STX FPTR_UNK_84_MENU?[2]
    STY FPTR_UNK_84_MENU?+1
    LDX #$6B
    LDY #$9F
    STX FPTR_SPRITES?[2]
    STY FPTR_SPRITES?+1
    JSR 1F:0F3F
    BIT R_**:$0083
    BVS 17:0942
    LDA #$09
    JSR $A945
    LDA FPTR_UNK_84_MENU_SELECTION?[2]
    RTS
    LDA #$08
    RTS
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA FPTR_UNK_84_MENU_SELECTION?[2]
    LSR A
    ASL A
    CLC
    ADC PACKET_YPOS_COORD?
    STA PACKET_YPOS_COORD?
    LDA FPTR_UNK_84_MENU_SELECTION?[2]
    AND #$01
    BEQ 17:095D
    CLC
    LDA PACKET_HPOS_COORD?
    ADC ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA PACKET_HPOS_COORD?
    LDA #$0D
    JMP 1F:14CE
    JSR $AC23
    BEQ 17:098D
    LDX #$80
    CMP #$02
    BEQ 17:096F
    LDX #$00
    STX ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA **:$0053
    AND #$80
    EOR ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA **:$0054
    JSR $A991
    BCS 17:098F
    LDX FPTR_UNK_84_MENU_SELECTION?[2]
    LDA **:$0591,X
    TAX
    DEX
    TXA
    STA **:$0054
    LDY **:$0053
    STA **:$061C,Y
    CLC
    RTS
    SEC
    RTS
    LDA #$0B
    JSR 1F:14CE
    JSR $A9B3
    LDA #$8B
    STA FPTR_SPRITES?[2]
    LDA #$9F
    STA FPTR_SPRITES?+1
    JSR ENGINE_MENU_HELPER_BEGIN?
    BIT R_**:$0083
    BVS 17:09B1
    BMI 17:09AD
    JMP $A991
    LDA FPTR_UNK_84_MENU_SELECTION?[2]
    CLC
    RTS
    SEC
    RTS
    LDA #$12
    STA PACKET_YPOS_COORD?
    LDX #$00
    STX **:$0591
    STX **:$0592
    STX **:$0593
    STX **:$0594
    INX
    STX **:$0590
    LDA **:$0054
    PHA
    LDY #$04
    TYA
    PHA
    LDY **:$0054
    LDA **:$0600,Y
    BEQ 17:09F8
    LDY **:$0054
    BMI 17:09E4
    LDA **:$0611,Y
    AND #$06
    EOR #$06
    BEQ 17:09F8
    INY
    TYA
    STA **:$0590,X
    INX
    TXA
    PHA
    JSR $A4BB
    LDA #$0C
    JSR 1F:14CE
    INC PACKET_YPOS_COORD?
    PLA
    TAX
    CLC
    LDA **:$0054
    ADC #$20
    STA **:$0054
    PLA
    TAY
    DEY
    BNE 17:09CE
    PLA
    STA **:$0054
    RTS
    LDA #$0E
    JSR 1F:14CE
    JSR $AA67
    JSR $AAE9
    BCS 17:0A65
    LDY **:$0053
    LDA FPTR_UNK_84_MENU_SELECTION?[2]
    STA **:$0610,Y
    LDY FPTR_UNK_84_MENU_SELECTION?[2]
    LDA [FPTR_5C_UNK[2]],Y
    JSR $AAA4
    LDY **:$0053
    JSR $AC49
    BCS 17:0A43
    JSR 1F:1247
    LDY #$05
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE+2],Y
    JSR LIB_MAPPER_BANKED_UNK
    CMP #$00
    BEQ 17:0A4C
    LDY **:$0053
    STA **:$061D,Y
    JSR $A962
    BCS 17:0A65
    RTS
    LDX **:$0053
    JSR $A4BB
    LDX #$14
    BNE 17:0A5E
    LDX #$10
    JSR 1F:1247
    LDY #$03
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE+2],Y
    JSR LIB_MAPPER_BANKED_UNK
    CMP #$00
    BEQ 17:0A5E
    LDX #$11
    TXA
    JSR 1F:14CE
    JSR SCRIPT_CTRL_WAIT_A/B_PRESSED
    SEC
    RTS
    LDY #$00
    TYA
    PHA
    AND #$01
    TAX
    LDA $9FB2,X
    STA PACKET_HPOS_COORD?
    TYA
    LSR A
    TAX
    LDA $9FB4,X
    STA PACKET_YPOS_COORD?
    LDA [FPTR_5C_UNK[2]],Y
    BEQ 17:0A9C
    JSR $AAA4
    JSR 1F:1247
    LDA #$04
    STA **:$0588
    LDY #$00
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE+2],Y
    STA **:$0589
    INY
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE+2],Y
    STA **:$058A
    LDA #$0F
    JSR 1F:14CE
    PLA
    TAY
    INY
    CPY #$08
    BNE 17:0A69
    RTS
    LDX #$00
    STX ENGINE_TO_DECIMAL_INDEX_POSITION
    LDX #$03
    ASL A
    ROL ENGINE_TO_DECIMAL_INDEX_POSITION
    DEX
    BNE 17:0AAA
    CLC
    ADC #$00
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    LDA ENGINE_TO_DECIMAL_INDEX_POSITION
    ADC #$98
    STA ENGINE_TO_DECIMAL_INDEX_POSITION
    RTS
    CLC
    LDA **:$0618,Y
    ADC #$20
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA **:$0619,Y
    ADC #$00
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    RTS
    JSR 1F:1247
    LDA #$21
    STA **:$0590
    LDY #$00
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE+2],Y
    STA **:$0591
    INY
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE+2],Y
    STA **:$0592
    LDA #$00
    STA **:$0593
    JMP LIB_MAPPER_BANKED_UNK
    LDA #$95
    STA FPTR_SPRITES?[2]
    LDA #$9F
    STA FPTR_SPRITES?+1
    LDA FPTR_5C_UNK[2]
    STA FPTR_UNK_84_MENU?[2]
    LDA FPTR_5C_UNK+1
    STA FPTR_UNK_84_MENU?+1
    JSR 1F:0F3F
    BIT R_**:$0083
    BVS 17:0B0E
    BMI 17:0B05
    JMP $AAE9
    LDA #$0C
    JSR $A945
    LDA FPTR_UNK_84_MENU_SELECTION?[2]
    CLC
    RTS
    SEC
    RTS
    LDY #$01
    LDA [FPTR_5C_UNK[2]],Y
    BEQ 17:0B32
    TYA
    PHA
    LDA #$0E
    JSR 1F:14CE
    LDA #$12
    JSR 1F:14CE
    JSR $AB61
    JSR $ABC2
    PLA
    TAY
    CPX #$01
    BEQ 17:0B39
    CPX #$02
    BEQ 17:0B5F
    INY
    CPY #$08
    BEQ 17:0B10
    BNE 17:0B12
    LDY FPTR_UNK_84_MENU_SELECTION?[2]
    LDA CHARACTER_NAMES_ARR[8],Y
    JSR 1F:15F7
    JSR 1F:1247
    LDY #$05
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE+2],Y
    BEQ 17:0B57
    LDY **:$0053
    STA **:$061D,Y
    PHA
    JSR LIB_MAPPER_BANKED_UNK
    PLA
    JMP $A962
    LDA #$10
    JSR 1F:14CE
    JSR SCRIPT_CTRL_WAIT_A/B_PRESSED
    SEC
    RTS
    TYA
    ASL A
    ASL A
    ASL A
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA #$80
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDX #$00
    LDA #$00
    STA CHARACTER_NAMES_ARR[8],X
    LDA [FPTR_5C_UNK[2]],Y
    AND ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    BEQ 17:0B7D
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA CHARACTER_NAMES_ARR[8],X
    INC ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    INX
    LSR ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    BCC 17:0B6D
    LDY #$00
    TYA
    PHA
    AND #$01
    TAX
    LDA $9FB2,X
    STA PACKET_HPOS_COORD?
    TYA
    LSR A
    TAX
    LDA $9FB4,X
    STA PACKET_YPOS_COORD?
    LDA CHARACTER_NAMES_ARR[8],Y
    BEQ 17:0BBA
    JSR 1F:15F7
    JSR 1F:1247
    LDA #$04
    STA **:$0588
    LDY #$00
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE+2],Y
    STA **:$0589
    INY
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE+2],Y
    STA **:$058A
    LDA #$0F
    JSR 1F:14CE
    PLA
    TAY
    INY
    CPY #$08
    BNE 17:0B86
    RTS
    LDA #$A7
    STA FPTR_SPRITES?[2]
    LDA #$9F
    STA FPTR_SPRITES?+1
    JSR ENGINE_MENU_HELPER_BEGIN?
    LDA R_**:$0083
    AND #$06
    BNE 17:0BE6
    LDA R_**:$0083
    AND #$81
    BNE 17:0BE0
    BIT R_**:$0083
    BVS 17:0BE3
    JMP $ABC2
    LDX #$00
    RTS
    LDX #$02
    RTS
    LDA #$9D
    STA FPTR_SPRITES?[2]
    LDA #$9F
    STA FPTR_SPRITES?+1
    JSR ENGINE_MENU_HELPER_BEGIN?
    LDA R_**:$0083
    AND #$08
    BNE 17:0BC2
    BIT R_**:$0083
    BVS 17:0C03
    BMI 17:0C00
    JMP $ABC2
    LDX #$01
    RTS
    LDX #$02
    RTS
    LDA #$0A
    JSR 1F:14CE
    JSR $A4BB
    JSR 1F:1247
    LDA #$00
    STA R_**:$0070
    LDA #$7A
    STA FPTR_PACKET_CREATION[2]
    LDA #$8E
    STA FPTR_PACKET_CREATION+1
    JSR ENGINE_CREATE_UPDATE_BUF_INIT_DEC?
    JMP LIB_MAPPER_BANKED_UNK
    PHA
    AND #$03
    TAX
    INX
    LDA #$01
    SEC
    ROR A
    ROR A
    DEX
    BNE 17:0C2B
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    PLA
    LSR A
    LSR A
    TAY
    LDA $9EC7,Y
    AND ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LSR ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    BCS 17:0C46
    LSR ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    JMP $AC3D
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    RTS
    JSR 1F:1247
    LDA **:$0611,Y
    STA SAVE_GAME_MOD_PAGE_PTR[2]
    TAX
    SEC
    LDA #$00
    ROL A
    DEX
    BNE 17:0C55
    STA ALT_COUNT_UNK
    LDY #$02
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE+2],Y
    JSR LIB_MAPPER_BANKED_UNK
    AND ALT_COUNT_UNK
    BEQ 17:0C68
    CLC
    RTS
    SEC
    RTS
    JSR $B75A
    BCS 17:0C91
    LDX #$08
    TXA
    PHA
    JSR $ACA5
    JSR $ACD6
    LDA #$FF
    LDY **:$0053
    STA **:$061D,Y
    JSR $B75A
    BCS 17:0C90
    PLA
    TAX
    DEX
    BNE 17:0C71
    DEC **:$005B
    BEQ 17:0C93
    CLC
    RTS
    PLA
    SEC
    RTS
    LDA 56_THING_NAME_SIZE
    CMP #$01
    BEQ 17:0CA3
    LDX #$64
    JSR ENGINE_WAIT_X_TIMES_UNK
    LDA #$92
    JSR $A3F8
    SEC
    RTS
    LDA #$00
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDY ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA **:$061D,Y
    CMP #$FF
    BEQ 17:0CC8
    CMP #$5E
    BEQ 17:0CD3
    LDA **:$060C,Y
    JSR 1F:13FD
    CMP ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    BCC 17:0CC8
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    CLC
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    ADC #$20
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    BNE 17:0CAB
    LDY ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    STY **:$0053
    RTS
    LDY **:$0053
    LDA **:$0600,Y
    BNE 17:0CE2
    LDA #$00
    JMP $ADC1
    LDA **:$0601,Y
    AND #$80
    BEQ 17:0CEE
    LDA #$00
    JMP $ADC1
    LDA **:$0601,Y
    AND #$40
    BEQ 17:0CFA
    LDA #$47
    JMP $ADC1
    LDA **:$0601,Y
    AND #$20
    BEQ 17:0D06
    LDA #$46
    JMP $ADC1
    LDA **:$0601,Y
    AND #$10
    BEQ 17:0D2B
    JSR ADDS_IDFK
    AND #$E0
    BNE 17:0D26
    LDA **:$0601,Y
    AND #$EF
    STA **:$0601,Y
    STY **:$0054
    JSR 1F:15E5
    LDA #$8E
    JMP $ADC1
    LDA #$3C
    JMP $ADC1
    LDA **:$0601,Y
    AND #$04
    BEQ 17:0D37
    LDA #$68
    JMP $ADC1
    LDA **:$061E,Y
    AND #$02
    BEQ 17:0D4A
    LDA **:$061D,Y
    CMP #$76
    BEQ 17:0D4A
    LDA #$56
    JMP $ADC1
    LDA **:$061E,Y
    AND #$20
    BEQ 17:0D6A
    JSR ADDS_IDFK
    AND #$C0
    BNE 17:0D65
    LDA **:$061E,Y
    AND #$DF
    STA **:$061E,Y
    LDA #$8B
    JMP $ADC1
    LDA #$1C
    JMP $ADC1
    LDA **:$0601,Y
    AND #$08
    BEQ 17:0D76
    LDA #$3A
    JSR $A3F8
    LDY **:$0053
    LDA **:$061D,Y
    LDY #$00
    STY ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    ASL A
    ROL ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    CLC
    LDA #$FB
    ADC ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA #$97
    ADC ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDY #$00
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    STA **:$005E
    INY
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    STA **:$005F
    LDY #$00
    LDA [**:$005E],Y
    LSR A
    LSR A
    LSR A
    LSR A
    JSR DATA_PAST_UNK
    .db C4
    .db AD
    .db C9
    .db AD
    .db F1
    .db AD
    .db 5D
    .db AE
    .db 04
    .db B8
    .db EA
    .db AE
    .db 08
    .db AF
    .db 31
    .db AF
    .db 39
    .db AF
    .db 7B
    .db AF
    .db 92
    .db AF
    .db 98
    .db AF
    .db 8E
    .db AE
    .db 4C
    .db F8
    .db A3
    .db A9
    .db 01
    .db 4C
    .db E1
    .db AF
    .db A0
    .db 00
    .db B1
    .db 5E
    .db 29
    .db 0F
    .db 20
    .db AE
    .db F2
    .db EC
    .db AD
    .db ED
    .db AF
    .db F2
    .db AF
    .db FE
    .db AF
    .db 08
    .db B0
    .db 12
    .db B0
    .db 22
    .db B0
    .db 32
    .db B0
    .db 37
    .db B0
    .db 41
    .db B0
    .db 4B
    .db B0
    .db 55
    .db B0
    .db 5F
    .db B0
    .db A9
    .db 01
    .db 4C
    .db CD
    .db AF
    .db A0
    .db 01
    .db B1
    .db 5E
    LDX #$00
    STX ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDX #$03
    ASL A
    ROL ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    DEX
    BNE 17:0DFB
    CLC
    ADC #$00
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    ADC #$9E
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    JSR 1F:1247
    LDY #$07
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    STA **:$004E
    LDA #$00
    STA **:$004F
    LDA #$21
    STA **:$0590
    LDY #$00
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    STA **:$0591
    INY
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    STA **:$0592
    LDA #$00
    STA **:$0593
    JSR LIB_MAPPER_BANKED_UNK
    LDA #$64
    JSR $A3F8
    JSR $B1C5
    BCC 17:0E53
    JSR $B1D1
    BCC 17:0E58
    JSR $B0A4
    LDA **:$0058
    JSR 1F:141F
    LDA #$00
    STA **:$0058
    LDA #$02
    JMP $AFCD
    LDA #$51
    JMP $A3F8
    LDA #$54
    JMP $A3F8
    LDY #$01
    LDA [**:$005E],Y
    JSR $AAA4
    JSR $AACC
    LDY **:$0053
    BMI 17:0E7B
    JSR ENGINE_WRAM_STATE_WRITEABLE
    LDY #$00
    LDA [**:$005E],Y
    AND #$0F
    CMP #$01
    BNE 17:0E7B
    JSR $B4E5
    LDA #$63
    JSR $A3F8
    LDA **:$0058
    JSR 1F:141F
    LDA #$00
    STA **:$0058
    LDA #$02
    JMP $AFCD
    LDY #$01
    LDA [**:$005E],Y
    JSR $AAA4
    JSR $AACC
    LDY **:$0053
    BMI 17:0EE5
    LDY #$00
    LDA [**:$005E],Y
    AND #$0F
    JSR DATA_PAST_UNK
    ???
    LDX $AEBD
    ???
    LDX 1F:0D20
    SBC [R_**:$0029],Y
    CPX #$D0
    ???
    JSR $B4E5
    LDA #$75
    JSR $A3F8
    JMP $AEE5
    JSR ADDS_IDFK
    AND #$E0
    BNE 17:0EE5
    JSR $B4E5
    LDA #$78
    JSR $A3F8
    JMP $AEE5
    JSR ENGINE_WRAM_STATE_WRITEABLE
    DEC CURRENT_SAVE_MANIPULATION_PAGE+31
    JSR ENGINE_WRAM_STATE_WRITE_DISABLED
    LDA CURRENT_SAVE_MANIPULATION_PAGE+31
    BNE 17:0EE5
    JSR $B4E5
    LDA #$91
    JSR $A3F8
    LDA #$02
    JMP $AFCD
    LDY #$00
    LDA [**:$005E],Y
    AND #$0F
    JSR RTN_UNK_DATA_AFTER
    ???
    ???
    ???
    LDA [NMI_FLAG_E0_TODO],Y
    LDA [**:$0002],Y
    ???
    ORA PPU_STATUS,X
    ???
    AND APU_DMC_ADDR,X
    ???
    LDA #$01
    JMP $AFCD
    LDY #$01
    LDA [**:$005E],Y
    STA SAVE_GAME_MOD_PAGE_PTR[2]
    DEY
    LDA [**:$005E],Y
    AND #$0F
    JSR RTN_UNK_DATA_AFTER
    BIT APU_NSE_LENGTH
    ???
    CMP 1F:19B2,Y
    ???
    ???
    ???
    ORA PPU_OAM_ADDR,Y
    ???
    ???
    ???
    DEC 1E:13B3
    ???
    CLD
    ???
    LDA #$02
    JMP $AFCD
    JSR $AF53
    BCC 17:0F3E
    JMP $AF4E
    JSR $AF53
    BCC 17:0F4E
    LDY #$01
    LDA [**:$005E],Y
    PHA
    INY
    LDA [**:$005E],Y
    STA **:$005F
    PLA
    STA **:$005E
    JMP $AD9C
    LDA #$03
    JMP $AFCD
    LDY #$00
    LDA [**:$005E],Y
    AND #$0F
    JSR RTN_UNK_DATA_AFTER
    ???
    ???
    BCS 17:0F10
    CPY 1F:17B0
    BCS 17:0F77
    LDA [ENGINE_FLAG_25_SKIP_UNK],Y
    LDA [ENGINE_FPTR_30+1],Y
    LDA [**:$00BC],Y
    BCS 17:0FBD
    LDA [SAVE_GAME_MOD_PAGE_PTR[2]],Y
    LDA [ARR_BITS_TO_UNK+1],Y
    LDA [FPTR_PACKET_CREATION[2]],Y
    LDA [FPTR_SPRITES?[2]],Y
    LDA [SCRIPT_B800_PTR_UNK[2]],Y
    LDA [**:$0094],Y
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    LDA **:$005F
    PHA
    LDA **:$005E
    PHA
    JSR $AFD3
    JSR $AD9C
    PLA
    STA **:$005E
    PLA
    STA **:$005F
    LDA #$03
    JMP $AFCD
    JSR $AFD3
    JMP $AD9C
    LDY #$00
    LDA [**:$005E],Y
    AND #$0F
    TAX
    LDA #$01
    JSR $AFE1
    TXA
    PHA
    LDA **:$005F
    PHA
    LDA **:$005E
    PHA
    JSR $AD9C
    LDA **:$005E
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA **:$005F
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    PLA
    STA **:$005E
    PLA
    STA **:$005F
    PLA
    TAX
    DEX
    BNE 17:0FA4
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA **:$005E
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    STA **:$005F
    JMP $AD9C
    JSR $AFE1
    JMP $AD9C
    LDY #$01
    LDA [**:$005E],Y
    PHA
    INY
    LDA [**:$005E],Y
    STA **:$005F
    PLA
    STA **:$005E
    RTS
    CLC
    ADC **:$005E
    STA **:$005E
    LDA #$00
    ADC **:$005F
    STA **:$005F
    RTS
    LDY **:$0053
    JMP $B513
    LDY **:$0054
    BPL 17:0FF9
    JMP $B555
    LDA #$01
    STA **:$0047
    RTS
    LDY **:$0054
    BPL 17:1005
    JMP $B5D3
    JMP $B6B2
    LDY **:$0054
    BPL 17:100F
    JMP $B67C
    JMP $B6F1
    LDA #$2D
    JSR $A3F8
    JSR $B069
    BCS 17:1021
    LDA #$40
    JSR $A3F8
    RTS
    LDA #$2E
    JSR $A3F8
    JSR $B069
    BCS 17:1031
    LDA #$41
    JSR $A3F8
    RTS
    LDA #$02
    STA **:$0047
    RTS
    LDY **:$0054
    BPL 17:103E
    JMP $B5DA
    JMP $B6BB
    LDY **:$0054
    BPL 17:1048
    JMP $B5E1
    JMP $B6C4
    LDY **:$0054
    BPL 17:1052
    JMP $B5E8
    JMP $B6CD
    LDY **:$0054
    BPL 17:105C
    JMP $B5EF
    JMP $B6D6
    LDY **:$0054
    BPL 17:1066
    JMP $B5F6
    JMP $B6DF
    LDY #$80
    CPY **:$0053
    BEQ 17:1076
    LDA **:$061E,Y
    AND #$01
    BNE 17:107F
    TYA
    CLC
    ADC #$20
    TAY
    BNE 17:106B
    CLC
    RTS
    STY **:$0054
    JSR $B513
    LDY **:$0054
    LDA **:$061E,Y
    AND #$FE
    STA **:$061E,Y
    LDA #$00
    STA **:$061D,Y
    LDY **:$0053
    LDA **:$0600,Y
    LDY **:$0054
    STA **:$0600,Y
    LDA #$42
    JSR $A3F8
    SEC
    RTS
    LDA #$19
    LDX #$FB
    LDY #$A7
    JSR ENGINE_SCRIPT_LAUNCH_R7_A_PTR_XY
    JMP 1F:15E5
    LDY **:$0053
    LDA **:$0600,Y
    BEQ 17:10CA
    LDA **:$0601,Y
    BMI 17:10CA
    LDY **:$0054
    LDA **:$0600,Y
    BEQ 17:10CA
    LDA **:$0601,Y
    BMI 17:10CA
    CLC
    RTS
    SEC
    RTS
    LDA UNK_NONZERO_SKIP
    BNE 17:10F3
    LDY **:$0054
    LDA **:$0601,Y
    AND #$70
    BNE 17:10F3
    LDA **:$061E,Y
    BMI 17:10F3
    LDA **:$060B,Y
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDY **:$0053
    LDA **:$060B,Y
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    JSR $B1A2
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    CMP ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    BCS 17:10F5
    CLC
    RTS
    SEC
    RTS
    JSR $BFE2
    BCS 17:1111
    LDY **:$0053
    LDA **:$060B,Y
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDY **:$0054
    LDA **:$060B,Y
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    JSR $B1A2
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    CMP ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    RTS
    LDY **:$0053
    LDA **:$061E,Y
    AND #$80
    EOR #$80
    ROL A
    BCS 17:1124
    JSR ADDS_IDFK
    AND #$80
    ROL A
    RTS
    LDA **:$0053
    BMI 17:112F
    LDA UNK_NONZERO_SKIP
    BEQ 17:112F
    CLC
    RTS
    SEC
    RTS
    LDY **:$0054
    BMI 17:114C
    LDA **:$0618,Y
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA **:$0619,Y
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDY #$20
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    CMP #$68
    BEQ 17:114E
    INY
    CPY #$28
    BNE 17:1141
    SEC
    RTS
    CLC
    RTS
    LDY **:$0054
    LDA **:$0602,Y
    AND #$80
    BNE 17:1160
    LDA **:$0602,Y
    AND #$01
    BNE 17:1162
    SEC
    RTS
    CLC
    RTS
    JSR ADDS_IDFK
    ASL A
    RTS
    LDY **:$0054
    LDA **:$0602,Y
    AND #$80
    EOR #$80
    ROL A
    RTS
    LDY **:$0054
    LDA **:$0602,Y
    AND #$04
    EOR #$04
    CMP #$01
    RTS
    LDA R_**:$0021
    BNE 17:1186
    SEC
    RTS
    CLC
    RTS
    LDY **:$0054
    LDA **:$0611,Y
    AND #$06
    EOR #$06
    CMP #$01
    RTS
    LDA 56_THING_NAME_SIZE
    CMP #$05
    BEQ 17:11A0
    CMP #$06
    BEQ 17:11A0
    SEC
    RTS
    CLC
    RTS
    LDA #$01
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    SEC
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    SBC ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    SBC #$00
    LSR A
    ROR ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    SEC
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    SBC #$66
    BCS 17:11BD
    LDA #$00
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    JSR ADDS_IDFK
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    RTS
    LDY **:$0053
    LDA **:$061E,Y
    AND #$40
    EOR #$40
    CMP #$01
    RTS
    LDY **:$0053
    SEC
    LDA **:$0605,Y
    SBC **:$004E
    LDA **:$0606,Y
    SBC **:$004F
    RTS
    RTS
    LDY **:$0053
    LDA **:$0601,Y
    AND #$08
    BNE 17:11EF
    LDA **:$061C,Y
    STA **:$0054
    RTS
    JSR ADDS_IDFK
    AND #$E0
    TAY
    LDA **:$0600,Y
    BEQ 17:11EF
    LDA **:$0601,Y
    BMI 17:11EF
    STY **:$0054
    RTS
    LDY **:$0053
    LDA **:$0601,Y
    AND #$08
    BEQ 17:1212
    JSR ADDS_IDFK
    AND #$80
    BNE 17:122D
    LDX #$80
    LDA **:$0053
    BPL 17:121A
    LDX #$00
    STX **:$0054
    RTS
    LDY **:$0053
    LDA **:$0601,Y
    AND #$08
    BEQ 17:122D
    JSR ADDS_IDFK
    AND #$80
    BNE 17:1212
    LDX #$00
    LDY **:$0053
    BPL 17:1235
    LDX #$80
    STX **:$0054
    RTS
    LDA **:$0053
    STA **:$0054
    RTS
    LDX #$00
    LDY **:$0053
    BPL 17:1245
    LDX #$80
    STX **:$0054
    RTS
    CLC
    LDA **:$0054
    ADC #$20
    STA **:$0054
    RTS
    LDY **:$0054
    LDA **:$0609,Y
    STA SAVE_GAME_MOD_PAGE_PTR[2]
    LDA **:$060A,Y
    STA SAVE_GAME_MOD_PAGE_PTR+1
    SEC
    LDY **:$0053
    LDA **:$0607,Y
    STA ALT_STUFF_INDEX?
    STA ARR_BITS_TO_UNK[8]
    SBC SAVE_GAME_MOD_PAGE_PTR[2]
    LDA **:$0608,Y
    STA ALT_COUNT_UNK
    STA ARR_BITS_TO_UNK+1
    SBC SAVE_GAME_MOD_PAGE_PTR+1
    BCC 17:12A8
    LSR SAVE_GAME_MOD_PAGE_PTR+1
    ROR SAVE_GAME_MOD_PAGE_PTR[2]
    SEC
    LDA ALT_STUFF_INDEX?
    SBC SAVE_GAME_MOD_PAGE_PTR[2]
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA ALT_COUNT_UNK
    SBC SAVE_GAME_MOD_PAGE_PTR+1
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDA 56_THING_NAME_SIZE
    CMP #$01
    BNE 17:1297
    JSR ADDS_IDFK
    AND #$07
    ORA #$04
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA #$00
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    ORA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    BNE 17:129F
    INC ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA **:$004E
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    STA **:$004F
    RTS
    ASL ALT_STUFF_INDEX?
    ROL ALT_COUNT_UNK
    CLC
    LDA ALT_STUFF_INDEX?
    ADC ARR_BITS_TO_UNK[8]
    STA ALT_STUFF_INDEX?
    LDA ALT_COUNT_UNK
    ADC ARR_BITS_TO_UNK+1
    STA ALT_COUNT_UNK
    SEC
    LDA ALT_STUFF_INDEX?
    SBC SAVE_GAME_MOD_PAGE_PTR[2]
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA ALT_COUNT_UNK
    SBC SAVE_GAME_MOD_PAGE_PTR+1
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    BCS 17:12CE
    LDA #$00
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LSR ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    ROR ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LSR ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    ROR ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    JMP $B284
    LDY **:$0053
    LDA **:$0607,Y
    STA **:$004E
    LDA **:$0608,Y
    STA **:$004F
    LDA 56_THING_NAME_SIZE
    CMP #$01
    BNE 17:12F8
    JSR ADDS_IDFK
    AND #$0F
    ORA #$08
    STA **:$004E
    LDA #$00
    STA **:$004F
    RTS
    LDA SAVE_GAME_MOD_PAGE_PTR[2]
    STA **:$004E
    LDA #$00
    STA **:$004F
    RTS
    LDA 56_THING_NAME_SIZE
    CMP #$05
    BNE 17:1318
    LDA 57_INDEX_UNK
    JSR $A3F8
    LDX 57_INDEX_UNK
    INX
    CPX #$9E
    BNE 17:1316
    INC 56_THING_NAME_SIZE
    STX 57_INDEX_UNK
    RTS
    LDA **:$0057
    ORA SAVE_GAME_MOD_PAGE_PTR[2]
    STA **:$0057
    RTS
    LDA #$6A
    JSR $A3F8
    LDA 56_THING_NAME_SIZE
    CMP #$02
    BNE 17:1330
    LDA #$95
    JMP $A3F8
    CMP #$03
    BNE 17:1339
    LDA #$94
    JMP $A3F8
    CMP #$04
    BNE 17:1342
    LDA #$93
    JMP $A3F8
    CMP #$05
    BNE 17:134B
    LDA #$01
    JMP $A3F8
    CMP #$06
    BNE 17:1354
    LDA #$01
    JMP $A3F8
    LDY **:$0054
    BMI 17:135D
    LDA #$90
    JMP $A3F8
    LDY **:$0054
    LDA **:$0607,Y
    STA **:$0590
    LDA **:$0608,Y
    STA **:$0591
    LDA **:$0609,Y
    STA **:$0592
    LDA **:$060A,Y
    STA **:$0593
    LDA #$24
    JSR $A3F8
    LDA #$25
    JSR $A3F8
    LDY **:$0054
    LDA **:$0602,Y
    PHA
    AND #$40
    BEQ 17:1390
    LDA #$6B
    JSR $A3F8
    PLA
    PHA
    AND #$20
    BEQ 17:139B
    LDA #$6C
    JSR $A3F8
    PLA
    PHA
    AND #$10
    BEQ 17:13A6
    LDA #$6D
    JSR $A3F8
    PLA
    PHA
    AND #$80
    BNE 17:13B7
    PLA
    PHA
    AND #$01
    BEQ 17:13B7
    LDA #$6F
    JSR $A3F8
    PLA
    LDA #$FF
    JMP $A3F8
    LDA #$90
    JMP $A3F8
    LDX #$0F
    LDA **:$0053
    BMI 17:13CA
    LDX #$01
    TXA
    JMP 1F:141F
    LDA SAVE_GAME_MOD_PAGE_PTR[2]
    STA **:$0058
    RTS
    LDA SAVE_GAME_MOD_PAGE_PTR[2]
    JMP $A3F8
    LDA SAVE_GAME_MOD_PAGE_PTR[2]
    JMP 1F:141F
    TYA
    BMI 17:13F0
    LDA **:$0611,Y
    CMP #$06
    BNE 17:13F0
    LDA #$00
    STA 56_THING_NAME_SIZE
    LDX #$88
    JMP $B40B
    JSR $B4CA
    CMP #$01
    BNE 17:13FC
    LDX #$19
    JMP $B40B
    CMP #$02
    BNE 17:1405
    LDX #$1A
    JMP $B40B
    JSR $B42D
    JMP $B496
    LDA **:$0054
    PHA
    LDA **:$0053
    PHA
    LDA **:$005F
    PHA
    LDA **:$005E
    PHA
    STY **:$0053
    TXA
    JSR $AD7B
    PLA
    STA **:$005E
    PLA
    STA **:$005F
    PLA
    STA **:$0053
    PLA
    STA **:$0054
    TAY
    JMP $B496
    TYA
    PHA
    LDA #$00
    STA **:$0603,Y
    STA **:$0604,Y
    LDA #$80
    STA **:$0601,Y
    TYA
    BPL 17:148B
    LDA #$00
    STA **:$0600,Y
    LDA **:$0618,Y
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA **:$0619,Y
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    TYA
    PHA
    CLC
    LDY #$1A
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    ADC **:$0049
    STA **:$0049
    INY
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    ADC **:$004A
    STA **:$004A
    LDA #$00
    ADC **:$004B
    STA **:$004B
    CLC
    LDY #$1C
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    ADC **:$004C
    STA **:$004C
    INY
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    ADC **:$004D
    STA **:$004D
    LDY #$1E
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    BEQ 17:147E
    STA R_**:$0048
    LDA #$06
    STA **:$07F0
    PLA
    TAY
    JSR $B555
    JMP $B490
    LDA #$15
    JSR 1F:141F
    JSR 1F:15E5
    PLA
    TAY
    RTS
    TYA
    PHA
    BMI 17:14A9
    LDA **:$0611,Y
    CMP #$06
    BEQ 17:14C7
    LDA #$10
    JSR $A3F8
    JMP $B4C7
    LDA 56_THING_NAME_SIZE
    CMP #$06
    BEQ 17:14C7
    LDA **:$0618,Y
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA **:$0619,Y
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDY #$0A
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    AND #$1C
    LSR A
    LSR A
    CLC
    ADC #$79
    JSR $A3F8
    PLA
    TAY
    RTS
    TYA
    PHA
    LDA **:$0618,Y
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA **:$0619,Y
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDY #$08
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    AND #$1C
    LSR A
    LSR A
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    PLA
    TAY
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    RTS
    LDY **:$0053
    CLC
    LDA **:$0618,Y
    ADC #$20
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA **:$0619,Y
    ADC #$00
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDY **:$0053
    LDA **:$0610,Y
    TAY
    JSR ENGINE_WRAM_STATE_WRITEABLE
    CPY #$07
    BEQ 17:150C
    INY
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    DEY
    STA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    INY
    BNE 17:14FF
    LDA #$00
    STA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    JMP ENGINE_WRAM_STATE_WRITE_DISABLED
    JSR $B5BC
    LDA **:$0601,Y
    AND #$7F
    STA **:$0601,Y
    LDA #$22
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA #$FF
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDA #$FF
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    JSR $B589
    LDA #$00
    STA **:$0045
    TYA
    PHA
    LDA **:$061A,Y
    AND #$03
    TAX
    LDY #$1F
    LDA [FPTR_5C_UNK[2]],Y
    STA FPTR_SPRITES?[2],X
    PLA
    TAY
    LDA **:$061C,Y
    LDX SAVE_GAME_MOD_PAGE_PTR+1
    STA **:$0300,X
    LDA #$01
    STA NMI_FLAG_E5_TODO
    JSR ENGINE_NMI_0x01_SET/WAIT
    LDA #$80
    STA NMI_FLAG_E5_TODO
    RTS
    JSR $B5BC
    LDA #$00
    LDX SAVE_GAME_MOD_PAGE_PTR+1
    STA **:$0300,X
    LDA #$01
    STA NMI_FLAG_E5_TODO
    JSR ENGINE_NMI_0x01_SET/WAIT
    LDA #$80
    STA NMI_FLAG_E5_TODO
    LDA #$00
    STA **:$0600,Y
    LDA #$00
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA #$23
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDA #$01
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    JSR $B589
    LDA **:$061A,Y
    AND #$03
    TAX
    LDA #$7C
    STA FPTR_SPRITES?[2],X
    RTS
    TYA
    PHA
    LDA **:$061A,Y
    AND #$03
    TAX
    LDY #$1F
    LDA [FPTR_5C_UNK[2]],Y
    ORA #$80
    STA FPTR_SPRITES?[2],X
    PLA
    TAY
    LDA #$80
    STA **:$0045
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA **:$0044
    AND #$01
    BNE 17:15AD
    LDA **:$0045
    EOR #$40
    STA **:$0045
    JSR ENGINE_NMI_0x01_SET/WAIT
    CLC
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    ADC ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    CMP ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    BNE 17:159F
    RTS
    LDA **:$0618,Y
    STA FPTR_5C_UNK[2]
    LDA **:$0619,Y
    STA FPTR_5C_UNK+1
    LDA **:$061A,Y
    AND #$03
    STA SAVE_GAME_MOD_PAGE_PTR[2]
    ASL A
    ASL A
    ASL A
    STA SAVE_GAME_MOD_PAGE_PTR+1
    RTS
    LDA #$0F
    LDX #$03
    JMP $B626
    LDA #$16
    LDX #$03
    JMP $B626
    LDA #$12
    LDX #$03
    JMP $B626
    LDA #$31
    LDX #$03
    JMP $B626
    LDA #$28
    LDX #$03
    JMP $B626
    LDA #$2A
    LDX #$03
    JMP $B626
    LDX #$03
    TXA
    PHA
    LDA #$05
    STA **:$07F0
    JSR ADDS_IDFK
    AND #$03
    TAX
    INX
    TXA
    PHA
    LDA #$01
    STA **:$07F0
    PLA
    PHA
    LDX #$03
    JSR $B626
    PLA
    TAX
    DEX
    BNE 17:160D
    PLA
    TAX
    DEX
    BNE 17:15FF
    RTS
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    STX ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA #$02
    JSR 1F:141F
    LDY **:$0054
    JSR $B5BC
    JSR ENGINE_SETTLE_ALL_UPDATES?
    LDX ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    TXA
    PHA
    LDX SAVE_GAME_MOD_PAGE_PTR+1
    LDA **:$0300,X
    PHA
    LDA #$00
    STA **:$0300,X
    LDA #$01
    STA NMI_FLAG_E5_TODO
    JSR ENGINE_NMI_0x01_SET/WAIT
    LDA #$7C
    LDX SAVE_GAME_MOD_PAGE_PTR[2]
    STA FPTR_SPRITES?[2],X
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    JSR 1F:14B8
    JSR ENGINE_NMI_0x01_SET/WAIT
    PLA
    LDX SAVE_GAME_MOD_PAGE_PTR+1
    STA **:$0300,X
    LDA #$01
    STA NMI_FLAG_E5_TODO
    JSR ENGINE_NMI_0x01_SET/WAIT
    LDY #$1F
    LDA [FPTR_5C_UNK[2]],Y
    LDX SAVE_GAME_MOD_PAGE_PTR[2]
    STA FPTR_SPRITES?[2],X
    JSR 1F:14B6
    JSR ENGINE_NMI_0x01_SET/WAIT
    PLA
    TAX
    DEX
    BNE 17:1639
    RTS
    LDA #$02
    JSR 1F:141F
    JSR $B5BC
    LDY **:$0054
    LDA **:$061C,Y
    PHA
    LDX SAVE_GAME_MOD_PAGE_PTR+1
    LDA **:$0300,X
    LDY **:$0054
    STA **:$061C,Y
    LDA #$00
    LDX SAVE_GAME_MOD_PAGE_PTR+1
    STA **:$0300,X
    LDA #$01
    STA NMI_FLAG_E5_TODO
    JSR ENGINE_NMI_0x01_SET/WAIT
    LDA #$80
    STA NMI_FLAG_E5_TODO
    LDY **:$0054
    JSR $B513
    PLA
    LDY **:$0054
    STA **:$061C,Y
    RTS
    LDX #$41
    LDY #$9F
    LDA #$0F
    JMP $B6FA
    LDX #$41
    LDY #$9F
    LDA #$16
    JMP $B6FA
    LDX #$41
    LDY #$9F
    LDA #$12
    JMP $B6FA
    LDX #$41
    LDY #$9F
    LDA #$31
    JMP $B6FA
    LDX #$41
    LDY #$9F
    LDA #$28
    JMP $B6FA
    LDX #$61
    LDY #$9F
    LDA #$2A
    JMP $B6FA
    LDX #$61
    LDY #$9F
    LDA #$0F
    JMP $B6FA
    LDX #$4B
    LDY #$9F
    LDA #$0F
    JMP $B6FA
    STA SAVE_GAME_MOD_PAGE_PTR[2]
    STX ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STY ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDA #$10
    JSR 1F:141F
    JSR ENGINE_SETTLE_ALL_UPDATES?
    LDY #$00
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    INY
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    STA ENGINE_TO_DECIMAL_INDEX_POSITION
    CLC
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    ADC #$02
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    ADC #$00
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDY #$00
    TYA
    PHA
    AND #$02
    BEQ 17:1730
    LDA SAVE_GAME_MOD_PAGE_PTR[2]
    JSR 1F:14B8
    JMP $B733
    JSR 1F:14B6
    PLA
    TAY
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    STA NMI_FP_UNK+1
    INY
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    STA NMI_FP_UNK[2]
    INY
    LDA #$01
    STA NMI_FLAG_E5_TODO
    JSR ENGINE_NMI_0x01_SET/WAIT
    CPY ENGINE_TO_DECIMAL_INDEX_POSITION
    BNE 17:1722
    DEC ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    BNE 17:1720
    LDA #$00
    STA NMI_FP_UNK[2]
    STA NMI_FP_UNK+1
    JSR ENGINE_NMI_0x01_SET/WAIT
    JMP 1F:14B6
    LDA **:$0047
    CMP #$01
    BEQ 17:17B0
    CMP #$02
    BEQ 17:17B0
    LDY #$00
    LDA **:$0600,Y
    BEQ 17:177B
    LDA **:$0611,Y
    AND #$06
    EOR #$06
    BEQ 17:177B
    LDA **:$0601,Y
    AND #$E0
    BEQ 17:17B2
    TYA
    CLC
    ADC #$20
    TAY
    BPL 17:1766
    LDA #$80
    STA **:$0601
    STA **:$0621
    STA **:$0641
    STA **:$0661
    LDA 56_THING_NAME_SIZE
    CMP #$04
    BNE 17:17A7
    LDA #$03
    STA **:$0047
    LDA #$04
    JSR 1F:141F
    LDA #$8F
    JSR $A3F8
    JMP $B7B0
    LDA #$00
    STA **:$0053
    LDA #$0E
    JSR $A3F8
    SEC
    RTS
    LDA **:$0680
    ORA **:$06A0
    ORA **:$06C0
    ORA **:$06E0
    BNE 17:17F3
    LDA UNK_NONZERO_SKIP
    BEQ 17:17C9
    LDA #$31
    JSR $A3F8
    LDA 56_THING_NAME_SIZE
    CMP #$06
    BNE 17:17E7
    LDA #$00
    STA **:$0054
    JSR $B8D4
    LDA #$20
    STA **:$0054
    JSR $B8D4
    LDA #$40
    STA **:$0054
    JSR $B8D4
    JMP $B7F1
    LDA #$05
    JSR LIB_UNK_1255
    LDA #$0D
    JSR $A3F8
    SEC
    RTS
    LDA 56_THING_NAME_SIZE
    CMP #$01
    BNE 17:1802
    LDY #$00
    JSR 1F:1673
    BCS 17:1802
    SEC
    RTS
    CLC
    RTS
    LDY #$01
    LDA [**:$005E],Y
    JSR RTN_UNK_DATA_AFTER
    .db 63
    .db B8
    .db 68
    .db B8
    .db 79
    .db B8
    .db 99
    .db B8
    .db AF
    .db B8
    .db BD
    .db B8
    .db CB
    .db B8
    .db 15
    .db B9
    .db 07
    .db BA
    .db 1B
    .db BA
    .db 2A
    .db BA
    .db 3C
    .db BA
    .db 6E
    .db BA
    .db 7A
    .db BA
    .db 95
    .db BA
    .db AA
    .db B8
    .db F2
    .db B8
    .db 86
    .db BA
    .db 8A
    .db B8
    .db E4
    .db BA
    .db FA
    .db BA
    .db 0D
    .db BB
    .db 25
    .db BB
    .db 3D
    .db BB
    .db 55
    .db BB
    .db 78
    .db BB
    .db 83
    .db BB
    .db 8C
    .db BB
    .db 9D
    .db BB
    .db B0
    .db BB
    .db CD
    .db BB
    .db EB
    .db BB
    .db F9
    .db BB
    .db 02
    .db BC
    .db 0B
    .db BC
    .db 14
    .db BC
    .db 1D
    .db BC
    .db 26
    .db BC
    .db 38
    .db BC
    .db 2F
    .db BC
    .db D0
    .db BC
    .db 2B
    .db BD
    .db 5D
    .db BC
    .db 44
    .db BD
    .db A9
    .db 02
    JMP $AFCD
    JSR $BDDD
    LDX **:$0054
    LDY #$03
    JSR $BEF2
    LDX #$0A
    LDA #$3E
    JMP $BD5B
    JSR $BDDD
    LDX **:$0054
    LDY #$05
    JSR $BEF2
    LDX #$0A
    LDA #$3D
    JMP $BD5B
    JSR $BDDD
    LDX **:$0054
    LDY #$07
    JSR $BDE8
    LDA #$20
    JMP $A3F8
    JSR $BDDD
    LDX **:$0054
    LDY #$0C
    JSR $BE3B
    LDX #$09
    LDA #$23
    JMP $BD5B
    LDY **:$0053
    JMP $B42D
    LDX **:$0054
    LDY #$07
    JSR $BF00
    LDX #$09
    LDA #$20
    JMP $BD5B
    LDX **:$0054
    LDY #$09
    JSR $BF00
    LDX #$09
    LDA #$22
    JMP $BD5B
    LDA #$FF
    STA **:$004E
    STA **:$004F
    JMP $B86B
    LDA #$FF
    STA **:$004E
    STA **:$004F
    LDA #$00
    LDX **:$0054
    STA **:$0601,X
    LDY #$03
    JSR $BEF2
    LDX #$0A
    LDA #$00
    JSR $BD5B
    LDX #$14
    JMP ENGINE_WAIT_X_TIMES_UNK
    JSR $BDDD
    LDY **:$0053
    SEC
    LDA **:$0603,Y
    SBC ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA **:$0603,Y
    LDA **:$0604,Y
    SBC ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    STA **:$0604,Y
    BCC 17:1912
    ORA **:$0603,Y
    BEQ 17:1912
    JMP 1F:15E5
    JMP $B3DD
    LDA 56_THING_NAME_SIZE
    CMP #$05
    BEQ 17:193E
    CMP #$06
    BEQ 17:193E
    JSR $BFE2
    BCC 17:193E
    LDX #$03
    LDY **:$0053
    LDA **:$0611,Y
    CMP #$06
    BNE 17:1931
    LDX #$3F
    STX ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    JSR ADDS_IDFK
    AND ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA **:$004E
    LDA #$00
    STA **:$004F
    LDA **:$0054
    PHA
    JSR $BDDD
    LDY **:$0054
    LDA **:$061E,Y
    AND #$04
    BEQ 17:1962
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    PHA
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    PHA
    LDA #$53
    JSR $A3F8
    PLA
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    PLA
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDY **:$0053
    STY **:$0054
    LDA **:$061E,Y
    AND #$10
    BEQ 17:196D
    LSR ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    ROR ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA **:$061E,Y
    AND #$08
    BEQ 17:1978
    LSR ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    ROR ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    JSR $BF74
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    ORA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    BNE 17:1983
    INC ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA **:$0590
    PHA
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    STA **:$0591
    PHA
    LDA #$0C
    JSR $A3F8
    PLA
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    PLA
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA 56_THING_NAME_SIZE
    CMP #$03
    BEQ 17:19A5
    JSR $BFEF
    BCS 17:19C4
    JSR $BFE2
    BCS 17:19C4
    LDY **:$0054
    SEC
    LDA **:$0603,Y
    SBC ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA **:$0603,Y
    LDA **:$0604,Y
    SBC ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    STA **:$0604,Y
    BCC 17:1A00
    ORA **:$0603,Y
    BEQ 17:1A00
    LDA **:$0601,Y
    AND #$0C
    BEQ 17:19DF
    JSR ADDS_IDFK
    AND #$C0
    BNE 17:19DF
    LDA **:$0601,Y
    AND #$F3
    STA **:$0601,Y
    LDA #$8D
    JSR $A3F8
    LDA **:$0601,Y
    AND #$10
    BEQ 17:19FA
    JSR ADDS_IDFK
    AND #$C0
    BNE 17:19FA
    LDA **:$0601,Y
    AND #$EF
    STA **:$0601,Y
    LDA #$61
    JSR $A3F8
    PLA
    STA **:$0054
    JMP 1F:15E5
    JSR $B3DD
    PLA
    STA **:$0054
    RTS
    JSR $BDDD
    LDY **:$0054
    JSR $BF74
    LDX **:$0054
    LDY #$09
    JSR $BE72
    LDA #$27
    JMP $A3F8
    JSR $BDDD
    LDX **:$0054
    LDY #$0B
    JSR $BEC4
    LDA #$26
    JMP $A3F8
    JSR $BFE2
    BCS 17:1A39
    JSR $BFEF
    BCS 17:1A39
    LDY **:$0054
    JMP $B3DD
    JMP $B924
    JSR $BFE2
    BCS 17:1A6B
    JSR $BFEF
    BCS 17:1A6B
    LDY **:$0054
    JSR ADDS_IDFK
    AND #$03
    TAX
    INX
    TXA
    SEC
    SBC **:$0603,Y
    LDA #$00
    SBC **:$0604,Y
    BCS 17:1A6B
    TXA
    STA **:$0603,Y
    LDA #$00
    STA **:$0604,Y
    LDX #$00
    LDA #$38
    JMP $BD5B
    JMP $BDD8
    LDX **:$0054
    LDY #$07
    JSR $BF15
    LDA #$21
    JMP $A3F8
    LDX **:$0054
    LDY #$09
    JSR $BF15
    LDA #$27
    JMP $A3F8
    JSR $BDDD
    LDX **:$0053
    LDY #$07
    JSR $BDE8
    LDA #$5C
    JMP $A3F8
    JSR $BDDD
    LDY **:$0054
    BMI 17:1ADD
    LDA **:$0618,Y
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    LDA **:$0619,Y
    STA ENGINE_TO_DECIMAL_INDEX_POSITION
    LDY #$11
    CLC
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE+2],Y
    ADC ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA SAVE_GAME_MOD_PAGE_PTR[2]
    INY
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE+2],Y
    ADC ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    STA SAVE_GAME_MOD_PAGE_PTR+1
    INY
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE+2],Y
    ADC #$00
    STA ALT_STUFF_INDEX?
    BCC 17:1AC7
    LDA #$FF
    STA SAVE_GAME_MOD_PAGE_PTR[2]
    STA SAVE_GAME_MOD_PAGE_PTR+1
    STA ALT_STUFF_INDEX?
    JSR ENGINE_WRAM_STATE_WRITEABLE
    LDY #$11
    LDA SAVE_GAME_MOD_PAGE_PTR[2]
    STA [ENGINE_PALETTE_FPTR/BITS/GEN_USE+2],Y
    INY
    LDA SAVE_GAME_MOD_PAGE_PTR+1
    STA [ENGINE_PALETTE_FPTR/BITS/GEN_USE+2],Y
    INY
    LDA ALT_STUFF_INDEX?
    STA [ENGINE_PALETTE_FPTR/BITS/GEN_USE+2],Y
    JSR ENGINE_WRAM_STATE_WRITE_DISABLED
    LDX #$0A
    LDA #$2F
    JMP $BD5B
    JSR $BFE2
    BCS 17:1AF7
    JSR $BF58
    BCS 17:1AF7
    LDA #$1B
    LDY #$00
    LDX #$80
    JMP $BD7F
    JMP $BDD8
    JSR $BFE2
    BCS 17:1AF7
    JSR $BF58
    BCS 17:1AF7
    LDA #$4B
    LDY #$00
    LDX #$02
    JMP $BD69
    JSR $BFE2
    BCS 17:1AF7
    JSR $BFEF
    BCS 17:1AF7
    JSR $BF66
    BCS 17:1AF7
    LDA #$39
    LDY #$00
    LDX #$08
    JMP $BD69
    JSR $BFE2
    BCS 17:1AF7
    JSR $BFEF
    BCS 17:1AF7
    JSR $BF66
    BCS 17:1AF7
    LDA #$3B
    LDY #$00
    LDX #$10
    JMP $BD69
    JSR $BFE2
    BCS 17:1AF7
    JSR $BFEF
    BCS 17:1AF7
    JSR $BF58
    BCS 17:1AF7
    LDA #$49
    LDY #$00
    LDX #$20
    JMP $BD69
    JSR $BFE2
    BCS 17:1AF7
    LDY **:$0054
    LDA **:$0618,Y
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA **:$0619,Y
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDY #$05
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    INY
    ORA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    BEQ 17:1AF7
    LDA #$4D
    LDY #$00
    LDX #$40
    JMP $BD7F
    LDY **:$0054
    LDA **:$061E,Y
    ORA #$08
    STA **:$061E,Y
    RTS
    LDA #$4F
    LDY #$0A
    LDX #$10
    JMP $BD7F
    JSR $BFE6
    BCS 17:1B9A
    LDA #$17
    LDY #$0A
    LDX #$04
    JMP $BD7F
    JMP $BDD8
    JSR $BFE2
    BCS 17:1B9A
    JSR $BFEF
    BCS 17:1B9A
    LDA #$4E
    LDY #$00
    LDX #$20
    JMP $BD7F
    JSR $BFE2
    BCS 17:1B9A
    JSR $BFEF
    BCS 17:1B9A
    LDA #$19
    LDY #$00
    LDX #$40
    JSR $BD69
    BCS 17:1BCC
    LDX **:$0054
    LDY #$09
    JSR $BF00
    RTS
    LDY **:$0054
    LDA **:$0611,Y
    CMP #$01
    BNE 17:1BEA
    LDA **:$061E,Y
    AND #$02
    BNE 17:1BEA
    LDA **:$061E,Y
    ORA #$02
    STA **:$061E,Y
    LDA #$74
    JMP $A3F8
    RTS
    JSR $BF66
    BCS 17:1B9A
    LDA #$67
    LDY #$00
    LDX #$04
    JMP $BD69
    LDA #$5D
    LDY #$0A
    LDX #$02
    JMP $BD95
    LDA #$61
    LDY #$0A
    LDX #$10
    JMP $BD95
    LDA #$60
    LDY #$0A
    LDX #$20
    JMP $BD95
    LDA #$70
    LDY #$0A
    LDX #$02
    JMP $BDAB
    LDA #$5E
    LDY #$0A
    LDX #$0C
    JMP $BD95
    LDA #$69
    LDY #$02
    LDX #$10
    JMP $BDAB
    LDA #$71
    LDY #$0A
    LDX #$40
    JMP $BD95
    LDY **:$0054
    LDA **:$0601,Y
    AND #$80
    BEQ 17:1C5A
    LDA #$00
    STA **:$0601,Y
    LDA #$FF
    STA **:$004E
    STA **:$004F
    LDX **:$0054
    LDY #$03
    JSR $BEF2
    LDX #$0A
    LDA #$62
    JMP $BD5B
    JMP $BDD8
    LDX 56_THING_NAME_SIZE
    CPX #$06
    BEQ 17:1C85
    LDA #$19
    JSR LIB_UNK_1255
    LDA VAL_CMP_UNK
    PHA
    LDX #$00
    JSR 1F:126B
    LDA #$03
    STA **:$07F0
    LDX #$38
    JSR ENGINE_WAIT_X_TIMES_UNK
    PLA
    CMP VAL_CMP_UNK
    BEQ 17:1C84
    STA VAL_CMP_DIFFERS_STORED_UNK
    RTS
    LDA #$19
    JSR LIB_UNK_1255
    SEC
    LDA 57_INDEX_UNK
    SBC #$9E
    TAX
    JSR 1F:126B
    LDA #$03
    STA **:$07F0
    JSR $B6E8
    LDA 57_INDEX_UNK
    JSR $A3F8
    LDA #$2C
    JSR LIB_UNK_1255
    LDX 57_INDEX_UNK
    INX
    CPX #$A9
    BEQ 17:1CAF
    STX 57_INDEX_UNK
    RTS
    JSR $B5FD
    LDA #$FF
    JSR LIB_UNK_1255
    LDX #$C8
    JSR ENGINE_WAIT_X_TIMES_UNK
    LDX #$A9
    STX 57_INDEX_UNK
    TXA
    JSR $A3F8
    LDX 57_INDEX_UNK
    INX
    CPX #$AC
    BNE 17:1CBE
    LDY #$80
    JMP $B3DD
    LDX #$0A
    LDY **:$0054
    LDA **:$0605,Y
    ORA **:$0606,Y
    BEQ 17:1D28
    SEC
    LDA **:$0605,Y
    TAX
    SBC #$0A
    LDA **:$0606,Y
    SBC #$00
    BCC 17:1CEC
    LDX #$0A
    STX **:$0590
    LDX #$00
    STX **:$0591
    SEC
    LDA **:$0605,Y
    SBC **:$0590
    STA **:$0605,Y
    LDA **:$0606,Y
    SBC **:$0591
    STA **:$0606,Y
    LDA #$48
    JSR $A3F8
    LDA **:$0590
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA **:$0591
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDX **:$0053
    LDY #$05
    JSR $BEF2
    LDA **:$0053
    STA **:$0054
    LDX #$0A
    LDA #$3D
    JMP $BD5B
    JMP $BDD8
    LDY **:$0054
    BMI 17:1D3F
    JSR $BFAA
    BCS 17:1D3F
    JSR $B4FC
    JSR $AACC
    LDA #$81
    JMP $A3F8
    LDA #$59
    JMP $A3F8
    LDY **:$0054
    LDA **:$0601,Y
    AND #$08
    BNE 17:1D5A
    LDA **:$0601,Y
    ORA #$08
    STA **:$0601,Y
    LDA #$39
    JSR $A3F8
    RTS
    PHA
    TXA
    BEQ 17:1D62
    JSR 1F:141F
    JSR 1F:15E5
    PLA
    JMP $A3F8
    PHA
    JSR $BDCC
    LDA **:$0601,Y
    AND ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    BNE 17:1DC6
    LDA **:$0601,Y
    ORA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA **:$0601,Y
    JMP $BDBE
    PHA
    JSR $BDCC
    LDA **:$061E,Y
    AND ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    BNE 17:1DC6
    LDA **:$061E,Y
    ORA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA **:$061E,Y
    JMP $BDBE
    PHA
    JSR $BDCC
    LDA **:$0601,Y
    AND ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    BEQ 17:1DC6
    LDA **:$0601,Y
    AND ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    STA **:$0601,Y
    JMP $BDBE
    PHA
    JSR $BDCC
    LDA **:$061E,Y
    AND ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    BEQ 17:1DC6
    LDA **:$061E,Y
    AND ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    STA **:$061E,Y
    LDX **:$0058
    PLA
    JSR $BD5B
    CLC
    RTS
    PLA
    JSR $BDD8
    SEC
    RTS
    STX ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    TXA
    EOR #$FF
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    STY **:$0058
    LDY **:$0054
    RTS
    LDA #$55
    JMP $A3F8
    LDA **:$004E
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA **:$004F
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    JMP 1F:12ED
    JSR $BF2C
    CLC
    LDA **:$0600,X
    ADC ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA ALT_STUFF_INDEX?
    LDA **:$0601,X
    ADC ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    STA ALT_COUNT_UNK
    BCC 17:1E02
    LDA #$FF
    STA ALT_STUFF_INDEX?
    STA ALT_COUNT_UNK
    SEC
    LDA SAVE_GAME_MOD_PAGE_PTR[2]
    SBC ALT_STUFF_INDEX?
    LDA SAVE_GAME_MOD_PAGE_PTR+1
    SBC ALT_COUNT_UNK
    BCS 17:1E15
    LDA SAVE_GAME_MOD_PAGE_PTR[2]
    STA ALT_STUFF_INDEX?
    LDA SAVE_GAME_MOD_PAGE_PTR+1
    STA ALT_COUNT_UNK
    SEC
    LDA ALT_STUFF_INDEX?
    SBC **:$0600,X
    STA **:$0590
    LDA ALT_COUNT_UNK
    SBC **:$0601,X
    STA **:$0591
    BCC 17:1E38
    ORA **:$0590
    BEQ 17:1E38
    LDA ALT_STUFF_INDEX?
    STA **:$0600,X
    LDA ALT_COUNT_UNK
    STA **:$0601,X
    RTS
    JMP $BFD8
    JSR $BF2C
    CLC
    LDA **:$0600,X
    ADC ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA ALT_STUFF_INDEX?
    BCC 17:1E4C
    LDA #$FF
    STA ALT_STUFF_INDEX?
    SEC
    LDA SAVE_GAME_MOD_PAGE_PTR[2]
    SBC ALT_STUFF_INDEX?
    BCS 17:1E57
    LDA SAVE_GAME_MOD_PAGE_PTR[2]
    STA ALT_STUFF_INDEX?
    LDA #$00
    STA **:$0591
    SEC
    LDA ALT_STUFF_INDEX?
    SBC **:$0600,X
    STA **:$0590
    BCC 17:1E6F
    BEQ 17:1E6F
    LDA ALT_STUFF_INDEX?
    STA **:$0600,X
    RTS
    JMP $BFD8
    JSR $BF2C
    SEC
    LDA **:$0600,X
    SBC ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA ALT_STUFF_INDEX?
    LDA **:$0601,X
    SBC ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    STA ALT_COUNT_UNK
    BCS 17:1E8C
    LDA #$00
    STA ALT_STUFF_INDEX?
    STA ALT_COUNT_UNK
    CPY #$03
    BEQ 17:1E9E
    CPY #$05
    BEQ 17:1E9E
    LDA ALT_STUFF_INDEX?
    ORA ALT_COUNT_UNK
    BNE 17:1E9E
    LDA #$01
    STA ALT_STUFF_INDEX?
    SEC
    LDA **:$0600,X
    SBC ALT_STUFF_INDEX?
    STA **:$0590
    LDA **:$0601,X
    SBC ALT_COUNT_UNK
    STA **:$0591
    BCC 17:1EC1
    ORA **:$0590
    BEQ 17:1EC1
    LDA ALT_STUFF_INDEX?
    STA **:$0600,X
    LDA ALT_COUNT_UNK
    STA **:$0601,X
    RTS
    JMP $BFD8
    JSR $BF2C
    SEC
    LDA **:$0600,X
    SBC ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA ALT_STUFF_INDEX?
    BEQ 17:1ED3
    BCS 17:1ED7
    LDA #$01
    STA ALT_STUFF_INDEX?
    LDA #$00
    STA **:$0591
    SEC
    LDA **:$0600,X
    SBC ALT_STUFF_INDEX?
    STA **:$0590
    BEQ 17:1EEF
    BCC 17:1EEF
    LDA ALT_STUFF_INDEX?
    STA **:$0600,X
    RTS
    JMP $BFD8
    JSR $BF2C
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    STA SAVE_GAME_MOD_PAGE_PTR[2]
    LDA ENGINE_TO_DECIMAL_INDEX_POSITION
    STA SAVE_GAME_MOD_PAGE_PTR+1
    JMP $BDEB
    TXA
    PHA
    JSR $BF2C
    PLA
    TAX
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA ENGINE_TO_DECIMAL_INDEX_POSITION
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    JSR 1F:12ED
    JMP $BDE8
    TXA
    PHA
    JSR $BF2C
    PLA
    TAX
    LDA ENGINE_TO_DECIMAL_INDEX_POSITION
    LSR A
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    ROR A
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    JSR 1F:12ED
    JMP $BE72
    LDA **:$0618,X
    STA ALT_STUFF_INDEX?
    LDA **:$0619,X
    STA ALT_COUNT_UNK
    LDA [ALT_STUFF_INDEX?],Y
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    ASL A
    STA SAVE_GAME_MOD_PAGE_PTR[2]
    INY
    LDA [ALT_STUFF_INDEX?],Y
    AND #$03
    STA ENGINE_TO_DECIMAL_INDEX_POSITION
    ROL A
    STA SAVE_GAME_MOD_PAGE_PTR+1
    BCC 17:1F4F
    LDA #$FF
    STA SAVE_GAME_MOD_PAGE_PTR[2]
    STA SAVE_GAME_MOD_PAGE_PTR+1
    DEY
    STX ARR_BITS_TO_UNK[8]
    TYA
    CLC
    ADC ARR_BITS_TO_UNK[8]
    TAX
    RTS
    LDY **:$0053
    LDA **:$060D,Y
    TAX
    LDY **:$0054
    LDA **:$060E,Y
    JMP $BF8C
    LDY **:$0053
    LDA **:$060D,Y
    TAX
    LDY **:$0054
    LDA **:$060F,Y
    JMP $BF8C
    LDA **:$0602,Y
    AND **:$0057
    BEQ 17:1F87
    LSR ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    ROR ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    ORA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    BNE 17:1F87
    INC ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    LDA #$00
    STA **:$0057
    RTS
    LSR A
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STX SAVE_GAME_MOD_PAGE_PTR[2]
    TXA
    SEC
    SBC ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    BCS 17:1F99
    LDA #$00
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+1
    LDA #$00
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    STA ENGINE_PALETTE_FPTR/BITS/GEN_USE+2
    JSR ENGINE_NUMS_UNK_MODULO?
    JSR ADDS_IDFK
    CMP ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]
    RTS
    JSR $AABC
    LDY #$00
    TYA
    PHA
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE[2]],Y
    BEQ 17:1FCB
    JSR $AAA4
    JSR 1F:1247
    LDY #$05
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE+2],Y
    TAX
    LDY #$02
    LDA [ENGINE_PALETTE_FPTR/BITS/GEN_USE+2],Y
    JSR LIB_MAPPER_BANKED_UNK
    AND #$40
    BNE 17:1FD4
    PLA
    TAY
    INY
    CPY #$08
    BNE 17:1FAF
    SEC
    RTS
    PLA
    TAY
    CLC
    RTS
    LDA #$00
    STA **:$0590
    STA **:$0591
    CLC
    RTS
    LDA **:$0054
    BPL 17:1FEB
    LDA 56_THING_NAME_SIZE
    LSR A
    BNE 17:1FED
    CLC
    RTS
    SEC
    RTS
    LDY **:$0054
    BMI 17:1FFC
    LDA **:$0611,Y
    CMP #$06
    BNE 17:1FFC
    SEC
    RTS
    CLC
    RTS
    .db FF
    .db FF
